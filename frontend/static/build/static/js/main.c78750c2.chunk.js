(window.webpackJsonp=window.webpackJsonp||[]).push([[0],[,,,,,,,,function(t,e,n){},,,function(t,e,n){t.exports=n(20)},,,,,,function(t,e,n){},function(t,e,n){},function(t,e,n){},function(t,e,n){"use strict";n.r(e);var a=n(0),i=n.n(a),o=n(9),s=n.n(o),c=(n(17),n(10)),l=n(2),r=n(3),u=n(5),d=n(4),p=n(6),h=n(1),m=(n(8),function(t){function e(t){var n;return Object(l.a)(this,e),(n=Object(u.a)(this,Object(d.a)(e).call(this,t))).state={caption:"",file:"",preview:null},n.handleInput=n.handleInput.bind(Object(h.a)(Object(h.a)(n))),n.handleSubmit=n.handleSubmit.bind(Object(h.a)(Object(h.a)(n))),n.fileInput=i.a.createRef(),n}return Object(p.a)(e,t),Object(r.a)(e,[{key:"handleInput",value:function(t){var e=this,n={};if("image"!==t.target.name)n[t.target.name]=t.target.value;else{var a=t.target.files[0];n.file=a,console.log({file:a});var i=new FileReader;i.onload=function(){return e.setState({preview:i.result})},i.readAsDataURL(a)}this.setState(n)}},{key:"handleSubmit",value:function(t){this.props.addPost({file:this.state.file,imageCaption:this.state.caption}),this.setState({caption:"",file:"",preview:null}),this.fileInput.current.value=""}},{key:"render",value:function(){return i.a.createElement("form",{id:"uploadForm",onSubmit:function(t){t.preventDefault()}},i.a.createElement("div",null,i.a.createElement("input",{ref:this.fileInput,id:"fileItem",type:"file",onChange:this.handleInput,name:"image"})),i.a.createElement("div",null,i.a.createElement("img",{id:"imagePreview",src:this.state.preview,alt:""})),i.a.createElement("div",{id:"theCaption"},i.a.createElement("input",{id:"enterCaption",type:"text",placeholder:"Enter Caption",value:this.state.caption,name:"caption",onChange:this.handleInput}),i.a.createElement("button",{id:"submitButton",className:"btn btn-outline-info my-2 my-sm-0",onClick:this.handleSubmit,value:"submit me"},"POST")))}}]),e}(a.Component)),f=(n(18),function(t){function e(){return Object(l.a)(this,e),Object(u.a)(this,Object(d.a)(e).apply(this,arguments))}return Object(p.a)(e,t),Object(r.a)(e,[{key:"render",value:function(){var t=this;console.log("posts",this.props.posts);var e=this.props.posts.map(function(e){return console.log("here we are",e),i.a.createElement("li",{key:e.id},i.a.createElement("div",{className:"yourpostname"},i.a.createElement("h6",null,"@",e.user.username)),i.a.createElement("img",{src:e.nature_upload,alt:""}),i.a.createElement("div",{id:"postcaption"},i.a.createElement("h4",{className:"yourpostscaption"},e.post_caption)),i.a.createElement("div",{id:"editPostB"},i.a.createElement("button",{className:"btn btn-outline-info my-2 my-sm-0",id:"editPostButton",onClick:function(){return t.props.edit(e)}},"Edit")),i.a.createElement("div",{id:"map"},i.a.createElement("a",{href:"/map/".concat(e.id,"/"),className:"btn btn-outline-info my-2 my-sm-0"},"See Location")),i.a.createElement("hr",null))});return i.a.createElement("div",{id:"usersposts"},i.a.createElement("h1",null,"Your Posts"),i.a.createElement("ul",null,e))}}]),e}(a.Component)),b=function(t){function e(t){var n;Object(l.a)(this,e),n=Object(u.a)(this,Object(d.a)(e).call(this,t));var a=t.post;return n.state={caption:a.post_caption,preview:a.nature_upload},n.handleInput=n.handleInput.bind(Object(h.a)(Object(h.a)(n))),n.handleUpdate=n.handleUpdate.bind(Object(h.a)(Object(h.a)(n))),n.handleDelete=n.handleDelete.bind(Object(h.a)(Object(h.a)(n))),n}return Object(p.a)(e,t),Object(r.a)(e,[{key:"handleInput",value:function(t){var e={};e[t.target.name]=t.target.value,this.setState(e)}},{key:"handleUpdate",value:function(t){t.preventDefault(),this.props.update({post_caption:this.state.caption,nature_upload:this.state.preview})}},{key:"handleDelete",value:function(t){this.props.delete()}},{key:"render",value:function(){return console.log(this.props.post),i.a.createElement("form",{id:"uploadForm",onSubmit:function(t){t.preventDefault()}},i.a.createElement("h1",{id:"editPostText"},"EDIT POST"),i.a.createElement("hr",null),i.a.createElement("div",null,i.a.createElement("img",{id:"imagePreview",src:this.state.preview,alt:"",width:"400px",height:"450px"})),i.a.createElement("div",{id:"theCaption"},i.a.createElement("input",{id:"enterCaption",type:"text",placeholder:"Enter Caption",value:this.state.caption,name:"caption",onChange:this.handleInput}),i.a.createElement("button",{id:"submitButton",className:"btn btn-outline-info my-2 my-sm-0",onClick:this.handleUpdate,value:"submit me"},"Save"),i.a.createElement("button",{id:"submitButton",className:"btn btn-outline-info my-2 my-sm-0",onClick:this.handleDelete},"Delete")))}}]),e}(a.Component),v=(n(19),function(t){function e(t){var n;return Object(l.a)(this,e),(n=Object(u.a)(this,Object(d.a)(e).call(this,t))).state={posts:[],isEditing:!1},n._addPost=n._addPost.bind(Object(h.a)(Object(h.a)(n))),n._doEdit=n._doEdit.bind(Object(h.a)(Object(h.a)(n))),n._update=n._update.bind(Object(h.a)(Object(h.a)(n))),n._delete=n._delete.bind(Object(h.a)(Object(h.a)(n))),n}return Object(p.a)(e,t),Object(r.a)(e,[{key:"_doEdit",value:function(t){this.setState({isEditing:t})}},{key:"_addPost",value:function(t){var e=this;console.log("post",t);var n=t.file,a=t.imageCaption,i=new FormData;i.append("nature_upload",n),i.append("post_caption",a),fetch("/api/post/",{method:"POST",body:i}).then(function(t){return t.json()}).then(function(t){console.log("Success",JSON.stringify(t)),console.log(t);var n=e.state.posts;n.push(t),e.setState({posts:n})}).catch(function(t){return console.log("Error",t)})}},{key:"_update",value:function(t){var e=this,n={post_caption:t.post_caption};fetch("/api/post/".concat(this.state.isEditing.id,"/update/"),{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({newData:n})}).then(function(t){return t.json()}).then(function(a){console.log("Put Success",JSON.stringify(a)),console.log(a),console.log({newData:n});var i=Object(c.a)(e.state.posts),o=i.indexOf(e.state.isEditing);i[o].post_caption=t.post_caption,e.setState({posts:i}),e.setState({isEditing:!1})}).catch(function(t){return console.log("Error",t)})}},{key:"_delete",value:function(){fetch("/api/post/".concat(this.state.isEditing.id,"/delete/"),{method:"DELETE"}).then(function(t){return t.json()}).then(function(t){console.log("delete Success",JSON.stringify(t)),console.log(t)}).catch(function(t){return console.log("Error",t)}),this.setState({isEditing:!1})}},{key:"componentDidMount",value:function(){var t=this;fetch("/api/post/",{method:"GET"}).then(function(t){if(200===t.status)return t.json();throw new Error("Something's wrong.")}).then(function(e){return t.setState({posts:e})}).catch(function(t){return console.log(t)})}},{key:"render",value:function(){return console.log(this.state.isEditing),i.a.createElement("div",{className:"App"},this.state.isEditing?i.a.createElement(b,{post:this.state.isEditing,update:this._update,delete:this._delete,cancel:this._cancel}):i.a.createElement("div",null,i.a.createElement(m,{addPost:this._addPost}),i.a.createElement(f,{posts:this.state.posts,edit:this._doEdit})))}}]),e}(a.Component));Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));s.a.render(i.a.createElement(v,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(t){t.unregister()})}],[[11,1,2]]]);
//# sourceMappingURL=main.c78750c2.chunk.js.map